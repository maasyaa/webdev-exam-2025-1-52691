<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Личный кабинет</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="page profile">
  <header class="header">
    <div class="container">
      <div class="headerContent">
        <div class="logo">
          <a href="index.html"><h1>noAmazon</h1></a>
        </div>
        <div class="headerActions">
          <a href="index.html" class="iconLink">
            <span class="icon">Каталог</span>
          </a>
          <a href="korzina.html" class="iconLink korzinaLink">
            <span class="icon">Корзина</span>
            <span class="badge" id="korzinaBadge">0</span>
          </a>
          <a href="profile.html" class="iconLink profileLink">
            <span class="icon">Личный кабинет</span>
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- Уведомления -->
  <div class="container">
    <div id="notifications" class="alerts"></div>
  </div>

  <main class="mainContent">
    <div class="container">
      <!-- Секция заказов -->
      <section class="col-12">
        <div class="flex justify-between align-center mb">
          <h1 class="title">Заказы</h1>
          <button class="btn" id="refreshBtn"><i class="bi bi-arrow-clockwise"></i> Обновить</button>
        </div>

        <!-- Сообщение о пустых заказах -->
        <div class="box text-center text-muted border round pad hidden" id="emptyState">Заказов пока нет.</div>

        <div class="table-container" id="ordersTableContainer">
          <table class="tables" id="ordersTable">
            <thead class="bgLight">
              <tr>
                <th>№</th>
                <th>Дата</th>
                <th>Состав</th>
                <th>Сумма</th>
                <th>Доставка</th>
                <th>Действия</th>
              </tr>
            </thead>
            <tbody id="ordersTbody">
              <tr><td colspan="6" class="textMuted">Нет доступных заказов</td></tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </main>

  <!-- Модальное окно редактирования -->
  <div class="modal is-hidden" id="editModal">
    <div class="modalOverlay"></div>
    <div class="modalWindow modal__window--large">
      <div class="modalHeader">
        <h2 class="modalTitle">Редактировать заказ</h2>
        <button class="modalClose" data-close-modal>×</button>
      </div>
      <form id="editOrderForm" class="modalBody">
        <div class="formGroup">
          <label class="label">Имя</label>
          <input class="input" id="editFullName" name="full_name" type="text" required>
        </div>
        <div class="formGroup">
          <label class="label">Email</label>
          <input class="input" id="editEmail" name="email" type="email" required>
        </div>
        <div class="formGroup">
          <label class="label">Телефон</label>
          <input class="input" id="editPhone" name="phone" type="text" required>
        </div>
        <div class="formGroup">
          <label class="label">Адрес доставки</label>
          <input class="input" id="editAddress" name="delivery_address" type="text" required>
        </div>
        <div class="grid gap-2">
          <div class="col-12 col-md-6">
            <label class="label">Дата доставки</label>
            <input class="input" id="editDeliveryDate" name="delivery_date" type="date" required>
          </div>
          <div class="col-12 col-md-6">
            <label class="label">Интервал</label>
            <select class="select" id="editDeliveryInterval" name="delivery_interval" required>
              <option value="">Выберите интервал</option>
              <option value="08:00-12:00">08:00-12:00</option>
              <option value="12:00-14:00">12:00-14:00</option>
              <option value="14:00-18:00">14:00-18:00</option>
              <option value="18:00-22:00">18:00-22:00</option>
            </select>
          </div>
        </div>
        <div class="formGroup">
          <label class="label">Комментарий</label>
          <textarea class="input" id="editComment" name="comment" rows="3"></textarea>
        </div>
      </form>
      <div class="modalFooter">
        <button class="btn btn-secondary" data-close-modal>Отмена</button>
        <button class="btn btn-primary" type="submit" form="editOrderForm">Сохранить</button>
      </div>
    </div>
  </div>

  <!-- Модальное окно просмотра -->
  <div class="modal is-hidden" id="detailsModal">
    <div class="modalOverlay"></div>
    <div class="modalWindow modal__window--large">
      <div class="modalHeader">
        <h2 class="modalTitle">Заказ</h2>
        <button class="modalClose" data-close-modal>×</button>
      </div>
      <div class="modalBody">
        <div class="layout-grid gap-md" id="modalDetailsGrid">
          <div class="col-12 col-md-6">
            <div class="text-muted small">ID</div>
            <div class="bold" id="d_id">—</div>
          </div>
          <div class="col-12 col-md-6">
            <div class="text-muted small">Дата</div>
            <div class="bold" id="d_date">—</div>
          </div>
          <div class="col-12 col-md-6">
            <div class="text-muted small">Имя</div>
            <div class="bold" id="d_fullName">—</div>
          </div>
          <div class="col-12 col-md-6">
            <div class="text-muted small">Email</div>
            <div class="bold" id="d_email">—</div>
          </div>
          <div class="col-12 col-md-6">
            <div class="text-muted small">Телефон</div>
            <div class="bold" id="d_phone">—</div>
          </div>
          <div class="col-12 col-md-6">
            <div class="text-muted small">Адрес</div>
            <div class="bold" id="d_address">—</div>
          </div>
          <div class="col-12 col-md-6">
            <div class="text-muted small">Дата доставки</div>
            <div class="bold" id="d_deliveryDate">—</div>
          </div>
          <div class="col-12 col-md-6">
            <div class="text-muted small">Интервал</div>
            <div class="bold" id="d_deliveryInterval">—</div>
          </div>
          <div class="col-12">
            <div class="text-muted small">Комментарий</div>
            <div class="bold" id="d_comment">—</div>
          </div>
          <div class="col-12">
            <div class="text-muted small">Товары</div>
            <div id="d_itemsList" class="box bg-light border round pad small"></div>
          </div>
        </div>
      </div>
      <div class="modalFooter">
        <button class="btn btn-secondary" data-close-modal>Ок</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="footerContent">
        <p>Контакты: noamazon@example.com</p>
        <p>&copy; 2026 noAmazon</p>
      </div>
    </div>
  </footer>

  <script src="js/api.js" defer></script>
  <script src="js/storage.js" defer></script>
  <script src="js/profile.js" defer></script>
</body>
</html>