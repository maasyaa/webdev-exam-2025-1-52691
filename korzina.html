<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Корзина</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/korzina.css">
</head>

<body class="min-vh-100 d-flex flex-column">

  <header class="border-bottom bg-white sticky-top">
    <div class="container py-3">
      <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">

        <a href="index.html" class="text-decoration-none d-flex align-items-center gap-2">
          <span class="fs-4 fw-semibold text-dark">noAmazon</span>
        </a>

        <nav class="d-flex align-items-center gap-2">
          <a
            class="btn btn-outline-secondary d-inline-flex align-items-center gap-2"
            href="index.html"
            aria-label="Перейти в каталог"
            title="Каталог"
          >
            <i class="bi bi-grid"></i>
            <span class="d-none d-md-inline">Каталог</span>
          </a>

          <a
            class="btn btn-outline-secondary d-inline-flex align-items-center gap-2"
            href="profile.html"
            aria-label="Перейти в личный кабинет"
            title="Личный кабинет"
          >
            <i class="bi bi-person"></i>
            <span class="d-none d-md-inline">Личный Кабинет</span>
          </a>

          <span
            class="btn btn-secondary d-inline-flex align-items-center gap-2 disabled"
            aria-label="Товаров в корзине"
            title="Товаров в корзине"
          >
            <i class="bi bi-korzina"></i>
            <span class="badge text-bg-light" id="korzinaCountBadge">0</span>
          </span>
        </nav>

      </div>
    </div>
  </header>

  <div class="container mt-3">
    <div id="notifications" class="d-grid gap-2"></div>
  </div>

  <main class="container my-4 flex-grow-1">
    <div class="row g-4">

      <section class="col-12 col-lg-7">
        <div class="d-flex align-items-center justify-content-between mb-3">
          <h1 class="h4 m-0">Корзина</h1>
          <button class="btn btn-outline-secondary btn-sm" type="button" id="clearkorzinaBtn">
            Очистить
          </button>
        </div>

        <div class="d-none text-center text-muted border rounded-3 p-5 bg-white" id="emptykorzina">
          Корзина пуста. Перейдите в каталог, чтобы добавить товары.
        </div>

        <div class="row g-3" id="korzinaGrid"></div>

        <div class="d-flex justify-content-center mt-3 d-none" id="loadingIndicator" aria-live="polite">
          <div class="spinner-border" role="status" aria-label="Загрузка"></div>
        </div>
      </section>

      <section class="col-12 col-lg-5">
        <div class="border rounded-3 p-3 bg-white">
          <h2 class="h5 mb-3">Оформление заказа</h2>

          <form id="orderForm" class="d-grid gap-3">
            <div>
              <label class="form-label" for="fullName">Имя</label>
              <input class="form-control" id="fullName" name="full_name" type="text" required>
            </div>

            <div>
              <label class="form-label" for="email">Email</label>
              <input class="form-control" id="email" name="email" type="email" required>
            </div>

            <div>
              <label class="form-label" for="phone">Телефон</label>
              <input class="form-control" id="phone" name="phone" type="text" required>
            </div>

            <div class="form-check">
              <input class="form-check-input" id="subscribe" name="subscribe" type="checkbox">
              <label class="form-check-label" for="subscribe">
                Согласен получать рассылку
              </label>
            </div>

            <div>
              <label class="form-label" for="address">Адрес доставки</label>
              <input class="form-control" id="address" name="delivery_address" type="text" required>
            </div>

            <div class="row g-2">
              <div class="col-12 col-md-6">
                <label class="form-label" for="deliveryDate">Дата доставки</label>
                <input class="form-control" id="deliveryDate" name="delivery_date" type="date" required>
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label" for="deliveryInterval">Временной интервал</label>
                <select class="form-select" id="deliveryInterval" name="delivery_interval" required>
                  <option value="">Выберите интервал</option>
                  <option value="08:00-12:00">08:00-12:00</option>
                  <option value="12:00-16:00">12:00-16:00</option>
                  <option value="16:00-18:00">16:00-18:00</option>
                  <option value="18:00-22:00">18:00-22:00</option>
                </select>
              </div>
            </div>

            <div>
              <label class="form-label" for="comment">Комментарий</label>
              <textarea class="form-control" id="comment" name="comment" rows="3"></textarea>
            </div>

            <div class="border rounded-3 p-3 bg-light">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Товары</span>
                <span id="goodsSumText">0 ₽</span>
              </div>
              <div class="d-flex justify-content-between">
                <span class="text-muted">Доставка</span>
                <span id="deliverySumText">0 ₽</span>
              </div>
              <hr class="my-2">
              <div class="d-flex justify-content-between fw-semibold">
                <span>Итого</span>
                <span id="totalSumText">0 ₽</span>
              </div>
            </div>

            <button class="btn btn-primary w-100" type="submit" id="submitOrderBtn" disabled>
              Оформить
            </button>

            <div class="form-text">
              Заказ можно оформить только если в корзине есть товары.
            </div>
          </form>
        </div>
      </section>

    </div>
  </main>

  <footer class="border-top bg-white mt-auto">
    <div class="container py-4">
      <div class="d-flex flex-column flex-md-row justify-content-between gap-2">
        <div class="text-muted">© 2025 noAmazon</div>
        <div class="text-muted">
          Контакты: <a href="mailto:info@example.com">noamazon@example.com</a>
        </div>
      </div>
    </div>
  </footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="js/api.js" defer></script>
  <script src="js/storage.js" defer></script>
  <script src="js/korzina.js" defer></script>
  <script src="js/order.js" defer></script>
</body>
</html>
